<th:block xmlns:th="http://www.thymeleaf.org" th:fragment="siteHeader">
    <header class="header">
        <div class="header-inner">
            <a class="logo" th:href="@{/}">
                <div class="logo-badge">J</div>
                <span>ì¤‘ê³ ë§ˆì¼“</span>
            </a>

            <form class="search" role="search" th:action="@{/search}" method="get">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2">
                    <circle cx="11" cy="11" r="7"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input name="q" type="search" placeholder="ì–´ë–¤ ìƒí’ˆì„ ì°¾ìœ¼ì‹œë‚˜ìš”? ì¹´í…Œê³ ë¦¬, ì—°ê´€ì–´ ëª¨ë‘ ê²€ìƒ‰"
                       aria-label="ìƒí’ˆ ê²€ìƒ‰" th:value="${query}">
                <button type="submit">ê²€ìƒ‰</button>
            </form>

            <div class="nav">
                <button type="button" class="theme-toggle" id="themeToggle" aria-label="ë‹¤í¬ ëª¨ë“œë¡œ ì „í™˜">
                    <span class="theme-toggle__icon theme-toggle__icon--sun" aria-hidden="true">â˜€ï¸</span>
                    <span class="theme-toggle__icon theme-toggle__icon--moon" aria-hidden="true">ğŸŒ™</span>
                </button>

                <a class="nav-button nav-button--sell"
                   th:href="${currentUser != null and currentUser.id != null} ? @{/product/new} : @{/auth/login}">íŒë§¤í•˜ê¸°</a>

                <div class="auth" th:if="${currentUser == null or currentUser.id == null}">
                    <a class="nav-link" th:href="@{/auth/signup}">íšŒì›ê°€ì…</a>
                    <a class="nav-link" th:href="@{/auth/login}">ë¡œê·¸ì¸</a>
                </div>

                <div class="auth auth--signed" th:if="${currentUser != null and currentUser.id != null}">
                    <span class="my-page" th:text="ë§ˆì´í˜ì´ì§€">ë§ˆì´í˜ì´ì§€</span>

<!--                    <form method="post" th:action="@{/api/auth/logout}" class="logout-form">-->
<!--                        <button type="submit">ë¡œê·¸ì•„ì›ƒ</button>-->
<!--                    </form>-->
                </div>
            </div>
        </div>
    </header>
</th:block>

<!-- ê³µí†µ í•„ìˆ˜ ì˜ì¡´ì„± CSS ë¡œë“œ-->
<th:block xmlns:th="http://www.thymeleaf.org" th:fragment="globalHead">
    <script>
        (function () {
            try {
                var stored = localStorage.getItem('jw-theme');
                var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                var theme = (stored === 'light' || stored === 'dark') ? stored : (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            } catch (error) {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/common/theme.css" th:href="@{/css/common/theme.css}" rel="stylesheet">
    <link href="/css/common/popup.css" th:href="@{/css/common/popup.css}" rel="stylesheet">
</th:block>
